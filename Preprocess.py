#!/usr/bin/python
from Config import *
from zipfile import ZipFile
from os import listdir,chdir,getcwd
from shutil import rmtree as removeFolder
import FeatureExtract

class Preprocess:
	
	def __init__(self):
		self.__parseAllRawApks()
	
	def __parseAllRawApks(self):
		antPath = getcwd()
		for zapk in listdir(PATH_RAW_TEST_MALWARE_SAMPLES):
			self.__extractApk(PATH_RAW_TEST_MALWARE_SAMPLES,zapk)		
			chdir(PATH_RAW_TEST_MALWARE_SAMPLES+zapk[0:-4])
			print FeatureExtract.FeatureExtract._featureExtractXML()
			chdir(antPath)
			removeFolder(PATH_RAW_TEST_MALWARE_SAMPLES+zapk[0:-4])
		
	def __extractApk(self,folder,name):
		with ZipFile(folder+name,"r") as zapk:
			zapk.extractall(folder+name[0:-4])
			
			
if __name__ == "__main__":
	Preprocess()

